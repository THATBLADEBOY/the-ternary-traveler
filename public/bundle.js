(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _interestCollection = _interopRequireDefault(require("./interestCollection"));

var _interestList = _interopRequireDefault(require("./interestList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const nameInput = document.createElement("input");
const descriptionInput = document.createElement("input");
const costInput = document.createElement("input");
const placeSelection = document.createElement("select");
const output_art = document.querySelector(".form-output");
const formBuilder = {
  buildForm() {
    const formArticle = document.createElement("article");
    output_art.appendChild(formArticle);
    const formHeader = document.createElement("h2");
    formHeader.textContent = "Create a New Interest";
    formArticle.appendChild(formHeader);
    nameInput.placeholder = "Name";
    formArticle.appendChild(nameInput);
    descriptionInput.placeholder = "Description";
    formArticle.appendChild(descriptionInput);
    costInput.placeholder = "Cost";
    formArticle.appendChild(costInput);

    _interestCollection.default.getAllPlaces().then(place => {
      const londonOption = document.createElement("option");
      londonOption.textContent = "London";
      londonOption.setAttribute("value", `${place[0].name}`);
      const parisOption = document.createElement("option");
      parisOption.textContent = "Paris";
      parisOption.setAttribute("value", `${place[1].name}`);
      const berlinOption = document.createElement("option");
      berlinOption.textContent = "Berlin";
      berlinOption.setAttribute("value", `${place[2].name}`);
      placeSelection.appendChild(londonOption);
      placeSelection.appendChild(parisOption);
      placeSelection.appendChild(berlinOption);
      formArticle.appendChild(placeSelection);
    });

    const addInterestButton = document.createElement("button");
    addInterestButton.textContent = "Add";
    formArticle.appendChild(addInterestButton);
    addInterestButton.addEventListener("click", this.addButtonFunction);
  },

  addButtonFunction() {
    let interestObj = {
      place: placeSelection.value,
      name: nameInput.value,
      description: descriptionInput.value,
      cost: costInput.value,
      review: ""
    };

    _interestCollection.default.postNewInterest(interestObj).then(response => {
      _interestList.default.listInterests();
    });
  }

};
var _default = formBuilder; // // "interests": [
//     { "id": 1,
//     "placeId": 1,
//     "name": "Local Market",
//     "description": "Local market where you can try purchase local products and try the local food",
//     "cost": 0.00,
//     "review": "You can definitely get things for a lower price if you are willing to bargain!"
//     }
// ]

exports.default = _default;

},{"./interestCollection":3,"./interestList":5}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _interestCollection = _interopRequireDefault(require("./interestCollection"));

var _interestList = _interopRequireDefault(require("./interestList"));

var _interestEditForm = _interopRequireDefault(require("./interestEditForm"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const interest = {
  makeInterestHTML(interestObj) {
    // const outPutArticle = document.querySelector(".output");
    const interestListOutput = document.createElement("article");
    interestListOutput.setAttribute("id", `interest--${interestObj.id}`); // outPutArticle.appendChild(interestListOutput);
    // let placeName = 
    // interestCollection.getAllPlaces()
    // .then(place => console.log(place[0].name, place[1].name, place[2]))

    const placeHeader = document.createElement("h3");
    placeHeader.textContent = `${interestObj.place}`;
    interestListOutput.appendChild(placeHeader);
    const nameParagraph = document.createElement("p");
    nameParagraph.textContent = `${interestObj.name}`;
    interestListOutput.appendChild(nameParagraph);
    const descriptionParagraph = document.createElement("p");
    descriptionParagraph.textContent = `${interestObj.description}`;
    interestListOutput.appendChild(descriptionParagraph);
    const costParagraph = document.createElement("p");
    costParagraph.textContent = `${interestObj.cost}`;
    interestListOutput.appendChild(costParagraph);
    const reviewParagraph = document.createElement("p");
    reviewParagraph.textContent = `${interestObj.review}`;
    interestListOutput.appendChild(reviewParagraph); // EDIT PORTION UNDERWAY!!!!!!!!!!!

    const editButton = document.createElement("button");
    editButton.textContent = "Edit";
    interestListOutput.appendChild(editButton);
    editButton.setAttribute("id", `interest--${interestObj.id}`);
    editButton.addEventListener("click", () => {
      let articleId = event.target.parentNode.id;
      let interestId = event.target.id.split("--")[1];
      console.log(interestId);

      _interestCollection.default.getInterest(interestId).then(response => {
        _interestEditForm.default.createAndAppendForm(articleId, response);
      });
    });
    const deleteButton = document.createElement("button");
    deleteButton.textContent = "Delete";
    interestListOutput.appendChild(deleteButton);
    deleteButton.setAttribute("id", `interest--${interestObj.id}`);
    deleteButton.addEventListener("click", () => {
      let interestId = event.target.id.split("--")[1];
      console.log(interestId);

      _interestCollection.default.deleteInterest(interestId).then(response => {
        _interestList.default.listInterests();
      });
    });
    return interestListOutput;
  }

}; // // "interests": [
//     { "id": 1,
//     "placeId": 1,
//     "name": "Local Market",
//     "description": "Local market where you can try purchase local products and try the local food",
//     "cost": 0.00,
//     "review": "You can definitely get things for a lower price if you are willing to bargain!"
//     }
// ]

var _default = interest;
exports.default = _default;

},{"./interestCollection":3,"./interestEditForm":4,"./interestList":5}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
const interestCollection = {
  getAllInterests() {
    return fetch("http://localhost:8088/interests").then(response => response.json());
  },

  getAllPlaces() {
    return fetch("http://localhost:8088/places").then(response => response.json());
  },

  postNewInterest(newInterestToSave) {
    return fetch("http://localhost:8088/interests", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(newInterestToSave)
    });
  },

  deleteInterest(interestId) {
    return fetch(`http://localhost:8088/interests/${interestId}`, {
      method: "DELETE",
      headers: {
        "Content-Type": "application/json"
      }
    });
  },

  putExistingInterest(interestId, interestToEdit) {
    return fetch(`http://localhost:8088/interests/${interestId}`, {
      method: "PUT",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(interestToEdit)
    });
  },

  getInterest(interestId) {
    return fetch(`http://localhost:8088/interests/${interestId}`).then(response => response.json());
  }

};
var _default = interestCollection;
exports.default = _default;

},{}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _interestCollection = _interopRequireDefault(require("./interestCollection"));

var _interestList = _interopRequireDefault(require("./interestList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const interestEditForm = {
  createAndAppendForm(interestId, interestObjToEdit) {
    let interestCostField = document.createElement("p");
    let costLabel = document.createElement("label");
    costLabel.textContent = "Cost";
    let costInput = document.createElement("input");
    costInput.value = interestObjToEdit.cost;
    interestCostField.appendChild(costLabel);
    interestCostField.appendChild(costInput);
    let interestReviewField = document.createElement("p");
    let reviewLabel = document.createElement("label");
    reviewLabel.textContent = "Review";
    let reviewInput = document.createElement("input");
    reviewInput.value = interestObjToEdit.review;
    interestReviewField.appendChild(reviewLabel);
    interestReviewField.appendChild(reviewInput);
    let updateButton = document.createElement("button");
    updateButton.textContent = "Update";
    updateButton.addEventListener("click", () => {
      let edittedInterest = {
        place: interestObjToEdit.place,
        name: interestObjToEdit.name,
        description: interestObjToEdit.description,
        cost: costInput.value,
        review: reviewInput.value
      };
      console.log(edittedInterest);

      _interestCollection.default.putExistingInterest(interestObjToEdit.id, edittedInterest).then(response => {
        _interestList.default.listInterests();
      });
    });
    let interestItemArticle = document.getElementById(`${interestId}`); //  THIS FUNCTION WOULD CLEAR THE DOM OF THE EXISTING INTEREST WHILE EDITTING...I THINK IT IS BETTER TO VIEW EXISTING INTEREST WHILE EDITING
    // while (interestItemArticle.firstChild) {
    //   interestItemArticle.removeChild(interestItemArticle.firstChild);
    // }

    interestItemArticle.appendChild(interestCostField);
    interestItemArticle.appendChild(interestReviewField);
    interestItemArticle.appendChild(updateButton);
  }

};
var _default = interestEditForm;
exports.default = _default;

},{"./interestCollection":3,"./interestList":5}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _interestCollection = _interopRequireDefault(require("./interestCollection"));

var _interest = _interopRequireDefault(require("./interest"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const interestList = {
  listInterests() {
    _interestCollection.default.getAllInterests().then(allInterests => {
      const interestDocFragment = document.createElement("div");
      allInterests.forEach(interestInstance => {
        console.log(interestInstance);

        const interestHtml = _interest.default.makeInterestHTML(interestInstance);

        interestDocFragment.appendChild(interestHtml);
      });
      const outputArticle = document.querySelector(".output");

      while (outputArticle.firstChild) {
        outputArticle.removeChild(outputArticle.firstChild);
      }

      outputArticle.appendChild(interestDocFragment);
    });
  }

};
var _default = interestList;
exports.default = _default;

},{"./interest":2,"./interestCollection":3}],6:[function(require,module,exports){
"use strict";

var _formBuilder = _interopRequireDefault(require("./formBuilder"));

var _interestCollection = _interopRequireDefault(require("./interestCollection"));

var _interestList = _interopRequireDefault(require("./interestList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_formBuilder.default.buildForm();

_interestList.default.listInterests();

},{"./formBuilder":1,"./interestCollection":3,"./interestList":5}]},{},[6])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zY3JpcHRzL2Zvcm1CdWlsZGVyLmpzIiwiLi4vc2NyaXB0cy9pbnRlcmVzdC5qcyIsIi4uL3NjcmlwdHMvaW50ZXJlc3RDb2xsZWN0aW9uLmpzIiwiLi4vc2NyaXB0cy9pbnRlcmVzdEVkaXRGb3JtLmpzIiwiLi4vc2NyaXB0cy9pbnRlcmVzdExpc3QuanMiLCIuLi9zY3JpcHRzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FDQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUFsQjtBQUNBLE1BQU0sZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBekI7QUFDQSxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUFsQjtBQUNBLE1BQU0sY0FBYyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCLENBQXZCO0FBQ0EsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsY0FBdkIsQ0FBbkI7QUFFQSxNQUFNLFdBQVcsR0FBRztBQUNoQixFQUFBLFNBQVMsR0FBRztBQUVSLFVBQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFNBQXZCLENBQXBCO0FBQ0EsSUFBQSxVQUFVLENBQUMsV0FBWCxDQUF1QixXQUF2QjtBQUNBLFVBQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLElBQXZCLENBQW5CO0FBQ0EsSUFBQSxVQUFVLENBQUMsV0FBWCxHQUF5Qix1QkFBekI7QUFDQSxJQUFBLFdBQVcsQ0FBQyxXQUFaLENBQXdCLFVBQXhCO0FBRUEsSUFBQSxTQUFTLENBQUMsV0FBVixHQUF3QixNQUF4QjtBQUNBLElBQUEsV0FBVyxDQUFDLFdBQVosQ0FBd0IsU0FBeEI7QUFFQSxJQUFBLGdCQUFn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LElBQUk7QUFDckMsUUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLGdCQUFaOztBQUNBLGNBQU0sWUFBWSxHQUFHLGtCQUFTLGdCQUFULENBQTBCLGdCQUExQixDQUFyQjs7QUFDQSxRQUFBLG1CQUFtQixDQUFDLFdBQXBCLENBQWdDLFlBQWhDO0FBQ0gsT0FKRDtBQU1BLFlBQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFNBQXZCLENBQXRCOztBQUVBLGFBQU8sYUFBYSxDQUFDLFVBQXJCLEVBQWlDO0FBQzdCLFFBQUEsYUFBYSxDQUFDLFdBQWQsQ0FBMEIsYUFBYSxDQUFDLFVBQXhDO0FBQ0g7O0FBRUQsTUFBQSxhQUFhLENBQUMsV0FBZCxDQUEwQixtQkFBMUI7QUFDSCxLQW5CRDtBQW9CSDs7QUF0QmdCLENBQXJCO2VBMkJlLFk7Ozs7OztBQzlCZjs7QUFDQTs7QUFDQTs7OztBQUdBLHFCQUFZLFNBQVo7O0FBRUEsc0JBQWEsYUFBYiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBpbnRlcmVzdENvbGxlY3Rpb24gZnJvbSBcIi4vaW50ZXJlc3RDb2xsZWN0aW9uXCJcbmltcG9ydCBpbnRlcmVzdExpc3QgZnJvbSBcIi4vaW50ZXJlc3RMaXN0XCJcblxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbmNvbnN0IGNvc3RJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbmNvbnN0IHBsYWNlU2VsZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbmNvbnN0IG91dHB1dF9hcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tb3V0cHV0XCIpO1xuXG5jb25zdCBmb3JtQnVpbGRlciA9IHtcbiAgICBidWlsZEZvcm0oKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmb3JtQXJ0aWNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhcnRpY2xlXCIpO1xuICAgICAgICBvdXRwdXRfYXJ0LmFwcGVuZENoaWxkKGZvcm1BcnRpY2xlKTtcbiAgICAgICAgY29uc3QgZm9ybUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgICAgZm9ybUhlYWRlci50ZXh0Q29udGVudCA9IFwiQ3JlYXRlIGEgTmV3IEludGVyZXN0XCI7XG4gICAgICAgIGZvcm1BcnRpY2xlLmFwcGVuZENoaWxkKGZvcm1IZWFkZXIpOyBcbiAgICAgICAgXG4gICAgICAgIG5hbWVJbnB1dC5wbGFjZWhvbGRlciA9IFwiTmFtZVwiO1xuICAgICAgICBmb3JtQXJ0aWNsZS5hcHBlbmRDaGlsZChuYW1lSW5wdXQpO1xuICAgICAgICBcbiAgICAgICAgZGVzY3JpcHRpb25JbnB1dC5wbGFjZWhvbGRlciA9IFwiRGVzY3JpcHRpb25cIjtcbiAgICAgICAgZm9ybUFydGljbGUuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25JbnB1dCk7XG4gICAgICAgIFxuICAgICAgICBjb3N0SW5wdXQucGxhY2Vob2xkZXIgPSBcIkNvc3RcIjtcbiAgICAgICAgZm9ybUFydGljbGUuYXBwZW5kQ2hpbGQoY29zdElucHV0KTtcblxuICAgICAgICBpbnRlcmVzdENvbGxlY3Rpb24uZ2V0QWxsUGxhY2VzKClcbiAgICAgICAgLnRoZW4ocGxhY2UgPT4ge1xuXG5cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxvbmRvbk9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgIGxvbmRvbk9wdGlvbi50ZXh0Q29udGVudCA9IFwiTG9uZG9uXCI7XG4gICAgICAgIGxvbmRvbk9wdGlvbi5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBgJHtwbGFjZVswXS5uYW1lfWApXG4gICAgICAgIGNvbnN0IHBhcmlzT3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgcGFyaXNPcHRpb24udGV4dENvbnRlbnQgPSBcIlBhcmlzXCI7XG4gICAgICAgIHBhcmlzT3B0aW9uLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIGAke3BsYWNlWzFdLm5hbWV9YClcbiAgICAgICAgY29uc3QgYmVybGluT3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgYmVybGluT3B0aW9uLnRleHRDb250ZW50ID0gXCJCZXJsaW5cIjtcbiAgICAgICAgYmVybGluT3B0aW9uLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIGAke3BsYWNlWzJdLm5hbWV9YCk7XG5cblxuICAgICAgICBwbGFjZVNlbGVjdGlvbi5hcHBlbmRDaGlsZChsb25kb25PcHRpb24pO1xuICAgICAgICBwbGFjZVNlbGVjdGlvbi5hcHBlbmRDaGlsZChwYXJpc09wdGlvbik7XG4gICAgICAgIHBsYWNlU2VsZWN0aW9uLmFwcGVuZENoaWxkKGJlcmxpbk9wdGlvbik7XG4gICAgICAgIGZvcm1BcnRpY2xlLmFwcGVuZENoaWxkKHBsYWNlU2VsZWN0aW9uKTtcblxuICAgIH0pXG5cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFkZEludGVyZXN0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgYWRkSW50ZXJlc3RCdXR0b24udGV4dENvbnRlbnQgPSBcIkFkZFwiO1xuICAgICAgICBmb3JtQXJ0aWNsZS5hcHBlbmRDaGlsZChhZGRJbnRlcmVzdEJ1dHRvbik7XG5cbiAgICAgICAgYWRkSW50ZXJlc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYWRkQnV0dG9uRnVuY3Rpb24pO1xuICAgIFxuICAgIH0sXG5cbiAgICBhZGRCdXR0b25GdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IGludGVyZXN0T2JqID0ge1xuICAgICAgICAgICAgcGxhY2U6IHBsYWNlU2VsZWN0aW9uLnZhbHVlLFxuICAgICAgICAgICAgbmFtZTogbmFtZUlucHV0LnZhbHVlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uSW5wdXQudmFsdWUsXG4gICAgICAgICAgICBjb3N0OiBjb3N0SW5wdXQudmFsdWUsXG4gICAgICAgICAgICByZXZpZXc6IFwiXCJcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVyZXN0Q29sbGVjdGlvbi5wb3N0TmV3SW50ZXJlc3QoaW50ZXJlc3RPYmopXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGludGVyZXN0TGlzdC5saXN0SW50ZXJlc3RzKCk7XG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZm9ybUJ1aWxkZXJcblxuLy8gLy8gXCJpbnRlcmVzdHNcIjogW1xuLy8gICAgIHsgXCJpZFwiOiAxLFxuLy8gICAgIFwicGxhY2VJZFwiOiAxLFxuLy8gICAgIFwibmFtZVwiOiBcIkxvY2FsIE1hcmtldFwiLFxuLy8gICAgIFwiZGVzY3JpcHRpb25cIjogXCJMb2NhbCBtYXJrZXQgd2hlcmUgeW91IGNhbiB0cnkgcHVyY2hhc2UgbG9jYWwgcHJvZHVjdHMgYW5kIHRyeSB0aGUgbG9jYWwgZm9vZFwiLFxuLy8gICAgIFwiY29zdFwiOiAwLjAwLFxuLy8gICAgIFwicmV2aWV3XCI6IFwiWW91IGNhbiBkZWZpbml0ZWx5IGdldCB0aGluZ3MgZm9yIGEgbG93ZXIgcHJpY2UgaWYgeW91IGFyZSB3aWxsaW5nIHRvIGJhcmdhaW4hXCJcbi8vICAgICB9XG4vLyBdIiwiaW1wb3J0IGludGVyZXN0Q29sbGVjdCBmcm9tIFwiLi9pbnRlcmVzdENvbGxlY3Rpb25cIlxuaW1wb3J0IGludGVyZXN0TGlzdCBmcm9tIFwiLi9pbnRlcmVzdExpc3RcIjtcbmltcG9ydCBpbnRlcmVzdENvbGxlY3Rpb24gZnJvbSBcIi4vaW50ZXJlc3RDb2xsZWN0aW9uXCI7XG5pbXBvcnQgaW50ZXJlc3RFZGl0Rm9ybSBmcm9tIFwiLi9pbnRlcmVzdEVkaXRGb3JtXCI7XG5cbmNvbnN0IGludGVyZXN0ID0ge1xuICAgIG1ha2VJbnRlcmVzdEhUTUwoaW50ZXJlc3RPYmopIHtcbiAgICAgICAgLy8gY29uc3Qgb3V0UHV0QXJ0aWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3V0cHV0XCIpO1xuICAgICAgICBjb25zdCBpbnRlcmVzdExpc3RPdXRwdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXJ0aWNsZVwiKVxuICAgICAgICBpbnRlcmVzdExpc3RPdXRwdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgYGludGVyZXN0LS0ke2ludGVyZXN0T2JqLmlkfWApXG4gICAgICAgIC8vIG91dFB1dEFydGljbGUuYXBwZW5kQ2hpbGQoaW50ZXJlc3RMaXN0T3V0cHV0KTtcbiAgICAgICAgLy8gbGV0IHBsYWNlTmFtZSA9IFxuICAgICAgICAvLyBpbnRlcmVzdENvbGxlY3Rpb24uZ2V0QWxsUGxhY2VzKClcbiAgICAgICAgLy8gLnRoZW4ocGxhY2UgPT4gY29uc29sZS5sb2cocGxhY2VbMF0ubmFtZSwgcGxhY2VbMV0ubmFtZSwgcGxhY2VbMl0pKVxuXG4gICAgICAgIGNvbnN0IHBsYWNlSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgICAgICBwbGFjZUhlYWRlci50ZXh0Q29udGVudCA9IGAke2ludGVyZXN0T2JqLnBsYWNlfWA7XG4gICAgICAgIGludGVyZXN0TGlzdE91dHB1dC5hcHBlbmRDaGlsZChwbGFjZUhlYWRlcik7XG4gICAgICAgIGNvbnN0IG5hbWVQYXJhZ3JhcGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgbmFtZVBhcmFncmFwaC50ZXh0Q29udGVudCA9IGAke2ludGVyZXN0T2JqLm5hbWV9YDtcbiAgICAgICAgaW50ZXJlc3RMaXN0T3V0cHV0LmFwcGVuZENoaWxkKG5hbWVQYXJhZ3JhcGgpO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvblBhcmFncmFwaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICBkZXNjcmlwdGlvblBhcmFncmFwaC50ZXh0Q29udGVudCA9IGAke2ludGVyZXN0T2JqLmRlc2NyaXB0aW9ufWA7XG4gICAgICAgIGludGVyZXN0TGlzdE91dHB1dC5hcHBlbmRDaGlsZChkZXNjcmlwdGlvblBhcmFncmFwaCk7XG4gICAgICAgIGNvbnN0IGNvc3RQYXJhZ3JhcGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgY29zdFBhcmFncmFwaC50ZXh0Q29udGVudCA9IGAke2ludGVyZXN0T2JqLmNvc3R9YDtcbiAgICAgICAgaW50ZXJlc3RMaXN0T3V0cHV0LmFwcGVuZENoaWxkKGNvc3RQYXJhZ3JhcGgpO1xuICAgICAgICBjb25zdCByZXZpZXdQYXJhZ3JhcGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgcmV2aWV3UGFyYWdyYXBoLnRleHRDb250ZW50ID0gYCR7aW50ZXJlc3RPYmoucmV2aWV3fWA7XG4gICAgICAgIGludGVyZXN0TGlzdE91dHB1dC5hcHBlbmRDaGlsZChyZXZpZXdQYXJhZ3JhcGgpO1xuXG5cblxuXG4vLyBFRElUIFBPUlRJT04gVU5ERVJXQVkhISEhISEhISEhIVxuXG5cbiAgICAgICAgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGVkaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkVkaXRcIjtcbiAgICAgICAgaW50ZXJlc3RMaXN0T3V0cHV0LmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xuICAgICAgICBlZGl0QnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIGBpbnRlcmVzdC0tJHtpbnRlcmVzdE9iai5pZH1gKVxuICAgICAgICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGxldCBhcnRpY2xlSWQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5pZFxuICAgICAgICBsZXQgaW50ZXJlc3RJZCA9IGV2ZW50LnRhcmdldC5pZC5zcGxpdChcIi0tXCIpWzFdXG4gICAgICAgICAgY29uc29sZS5sb2coaW50ZXJlc3RJZClcbiAgICAgICAgICBpbnRlcmVzdENvbGxlY3Rpb24uZ2V0SW50ZXJlc3QoaW50ZXJlc3RJZClcbiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpbnRlcmVzdEVkaXRGb3JtLmNyZWF0ZUFuZEFwcGVuZEZvcm0oYXJ0aWNsZUlkLCByZXNwb25zZSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuXG5cblxuXG5cblxuXG5cblxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBkZWxldGVCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xuICAgICAgICBpbnRlcmVzdExpc3RPdXRwdXQuYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uKTtcbiAgICAgICAgZGVsZXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIGBpbnRlcmVzdC0tJHtpbnRlcmVzdE9iai5pZH1gKVxuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbGV0IGludGVyZXN0SWQgPSBldmVudC50YXJnZXQuaWQuc3BsaXQoXCItLVwiKVsxXVxuICAgICAgICBjb25zb2xlLmxvZyhpbnRlcmVzdElkKTtcbiAgICAgICAgaW50ZXJlc3RDb2xsZWN0LmRlbGV0ZUludGVyZXN0KGludGVyZXN0SWQpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaW50ZXJlc3RMaXN0Lmxpc3RJbnRlcmVzdHMoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG5cblxuXG5cbiAgICAgICAgcmV0dXJuIGludGVyZXN0TGlzdE91dHB1dFxuXG4gICAgfVxufVxuXG4vLyAvLyBcImludGVyZXN0c1wiOiBbXG4vLyAgICAgeyBcImlkXCI6IDEsXG4vLyAgICAgXCJwbGFjZUlkXCI6IDEsXG4vLyAgICAgXCJuYW1lXCI6IFwiTG9jYWwgTWFya2V0XCIsXG4vLyAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkxvY2FsIG1hcmtldCB3aGVyZSB5b3UgY2FuIHRyeSBwdXJjaGFzZSBsb2NhbCBwcm9kdWN0cyBhbmQgdHJ5IHRoZSBsb2NhbCBmb29kXCIsXG4vLyAgICAgXCJjb3N0XCI6IDAuMDAsXG4vLyAgICAgXCJyZXZpZXdcIjogXCJZb3UgY2FuIGRlZmluaXRlbHkgZ2V0IHRoaW5ncyBmb3IgYSBsb3dlciBwcmljZSBpZiB5b3UgYXJlIHdpbGxpbmcgdG8gYmFyZ2FpbiFcIlxuLy8gICAgIH1cbi8vIF1cblxuXG5cbmV4cG9ydCBkZWZhdWx0IGludGVyZXN0IiwiY29uc3QgaW50ZXJlc3RDb2xsZWN0aW9uID0ge1xuICBcbiAgICBnZXRBbGxJbnRlcmVzdHMoKSB7XG4gICAgICByZXR1cm4gZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjgwODgvaW50ZXJlc3RzXCIpXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgfSxcblxuICAgIGdldEFsbFBsYWNlcygpIHtcbiAgICAgIHJldHVybiBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9wbGFjZXNcIilcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICB9LFxuXG4gICAgcG9zdE5ld0ludGVyZXN0KG5ld0ludGVyZXN0VG9TYXZlKSB7XG4gICAgICByZXR1cm4gZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjgwODgvaW50ZXJlc3RzXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobmV3SW50ZXJlc3RUb1NhdmUpXG4gICAgICB9KVxuICAgIH0sXG4gICBcbiAgICBkZWxldGVJbnRlcmVzdChpbnRlcmVzdElkKSB7XG4gICAgICByZXR1cm4gZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pbnRlcmVzdHMvJHtpbnRlcmVzdElkfWAsIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sXG4gICAgXG4gICAgcHV0RXhpc3RpbmdJbnRlcmVzdChpbnRlcmVzdElkLCBpbnRlcmVzdFRvRWRpdCkge1xuICAgICAgcmV0dXJuIGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjgwODgvaW50ZXJlc3RzLyR7aW50ZXJlc3RJZH1gLCB7XG4gICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoaW50ZXJlc3RUb0VkaXQpXG4gICAgICB9KVxuICAgIH0sXG4gICAgZ2V0SW50ZXJlc3QoaW50ZXJlc3RJZCkge1xuICAgICAgcmV0dXJuIGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjgwODgvaW50ZXJlc3RzLyR7aW50ZXJlc3RJZH1gKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgIH0sXG4gIH1cblxuICBleHBvcnQgZGVmYXVsdCBpbnRlcmVzdENvbGxlY3Rpb25cblxuXG4gIFxuIiwiaW1wb3J0IGludGVyZXN0Q29sbGVjdGlvbiBmcm9tIFwiLi9pbnRlcmVzdENvbGxlY3Rpb25cIjtcbmltcG9ydCBpbnRlcmVzdExpc3QgZnJvbSBcIi4vaW50ZXJlc3RMaXN0XCI7XG5cbmNvbnN0IGludGVyZXN0RWRpdEZvcm0gPSB7XG4gIGNyZWF0ZUFuZEFwcGVuZEZvcm0gKGludGVyZXN0SWQsIGludGVyZXN0T2JqVG9FZGl0KSB7XG5cbiAgICBcbiAgICBsZXQgaW50ZXJlc3RDb3N0RmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxuXG4gICAgbGV0IGNvc3RMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICAgIGNvc3RMYWJlbC50ZXh0Q29udGVudCA9IFwiQ29zdFwiXG4gICAgbGV0IGNvc3RJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxuICAgIGNvc3RJbnB1dC52YWx1ZSA9IGludGVyZXN0T2JqVG9FZGl0LmNvc3RcblxuICAgIGludGVyZXN0Q29zdEZpZWxkLmFwcGVuZENoaWxkKGNvc3RMYWJlbCk7XG4gICAgaW50ZXJlc3RDb3N0RmllbGQuYXBwZW5kQ2hpbGQoY29zdElucHV0KTtcblxuICAgIGxldCBpbnRlcmVzdFJldmlld0ZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcblxuICAgIGxldCByZXZpZXdMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICAgIHJldmlld0xhYmVsLnRleHRDb250ZW50ID0gXCJSZXZpZXdcIlxuICAgIGxldCByZXZpZXdJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxuICAgIHJldmlld0lucHV0LnZhbHVlID0gaW50ZXJlc3RPYmpUb0VkaXQucmV2aWV3XG5cbiAgICBpbnRlcmVzdFJldmlld0ZpZWxkLmFwcGVuZENoaWxkKHJldmlld0xhYmVsKTtcbiAgICBpbnRlcmVzdFJldmlld0ZpZWxkLmFwcGVuZENoaWxkKHJldmlld0lucHV0KTtcblxuXG4gICAgbGV0IHVwZGF0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIilcbiAgICB1cGRhdGVCdXR0b24udGV4dENvbnRlbnQgPSBcIlVwZGF0ZVwiXG4gICAgdXBkYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBcbiAgIFxuXG4gICBcbiAgICBcbiAgICBsZXQgZWRpdHRlZEludGVyZXN0ID0ge1xuICAgICAgICBwbGFjZTogaW50ZXJlc3RPYmpUb0VkaXQucGxhY2UsXG4gICAgICAgIG5hbWU6IGludGVyZXN0T2JqVG9FZGl0Lm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBpbnRlcmVzdE9ialRvRWRpdC5kZXNjcmlwdGlvbixcbiAgICAgICAgY29zdDogY29zdElucHV0LnZhbHVlLFxuICAgICAgICByZXZpZXc6IHJldmlld0lucHV0LnZhbHVlXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coZWRpdHRlZEludGVyZXN0KTtcbiAgXG5cblxuICAgIGludGVyZXN0Q29sbGVjdGlvbi5wdXRFeGlzdGluZ0ludGVyZXN0KGludGVyZXN0T2JqVG9FZGl0LmlkICxlZGl0dGVkSW50ZXJlc3QpXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICBpbnRlcmVzdExpc3QubGlzdEludGVyZXN0cygpO1xuICAgIH0pXG5cbiAgfSlcbiAgICBcblxuICAgICBcbiAgICAgIFxuICAgIFxuXG4gICAgXG5cbiAgICBcbiAgICBsZXQgaW50ZXJlc3RJdGVtQXJ0aWNsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2ludGVyZXN0SWR9YClcblxuICAvLyAgVEhJUyBGVU5DVElPTiBXT1VMRCBDTEVBUiBUSEUgRE9NIE9GIFRIRSBFWElTVElORyBJTlRFUkVTVCBXSElMRSBFRElUVElORy4uLkkgVEhJTksgSVQgSVMgQkVUVEVSIFRPIFZJRVcgRVhJU1RJTkcgSU5URVJFU1QgV0hJTEUgRURJVElOR1xuICAgIC8vIHdoaWxlIChpbnRlcmVzdEl0ZW1BcnRpY2xlLmZpcnN0Q2hpbGQpIHtcbiAgICAvLyAgIGludGVyZXN0SXRlbUFydGljbGUucmVtb3ZlQ2hpbGQoaW50ZXJlc3RJdGVtQXJ0aWNsZS5maXJzdENoaWxkKTtcbiAgICAvLyB9XG5cblxuICAgIGludGVyZXN0SXRlbUFydGljbGUuYXBwZW5kQ2hpbGQoaW50ZXJlc3RDb3N0RmllbGQpXG4gICAgaW50ZXJlc3RJdGVtQXJ0aWNsZS5hcHBlbmRDaGlsZChpbnRlcmVzdFJldmlld0ZpZWxkKVxuICAgIGludGVyZXN0SXRlbUFydGljbGUuYXBwZW5kQ2hpbGQodXBkYXRlQnV0dG9uKVxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBpbnRlcmVzdEVkaXRGb3JtXG4iLCJpbXBvcnQgaW50ZXJlc3RDb2xsZWN0aW9uIGZyb20gXCIuL2ludGVyZXN0Q29sbGVjdGlvblwiXG5pbXBvcnQgaW50ZXJlc3QgZnJvbSBcIi4vaW50ZXJlc3RcIlxuXG5jb25zdCBpbnRlcmVzdExpc3QgPSB7XG4gICAgbGlzdEludGVyZXN0cygpIHtcbiAgICAgICAgaW50ZXJlc3RDb2xsZWN0aW9uLmdldEFsbEludGVyZXN0cygpXG4gICAgICAgIC50aGVuKGFsbEludGVyZXN0cyA9PiB7XG5cbiAgICAgICAgICAgIGNvbnN0IGludGVyZXN0RG9jRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgXG4gICAgICAgICAgICBhbGxJbnRlcmVzdHMuZm9yRWFjaChpbnRlcmVzdEluc3RhbmNlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpbnRlcmVzdEluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcmVzdEh0bWwgPSBpbnRlcmVzdC5tYWtlSW50ZXJlc3RIVE1MKGludGVyZXN0SW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIGludGVyZXN0RG9jRnJhZ21lbnQuYXBwZW5kQ2hpbGQoaW50ZXJlc3RIdG1sKTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGNvbnN0IG91dHB1dEFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm91dHB1dFwiKTtcblxuICAgICAgICAgICAgd2hpbGUgKG91dHB1dEFydGljbGUuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgIG91dHB1dEFydGljbGUucmVtb3ZlQ2hpbGQob3V0cHV0QXJ0aWNsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3V0cHV0QXJ0aWNsZS5hcHBlbmRDaGlsZChpbnRlcmVzdERvY0ZyYWdtZW50KTtcbiAgICAgICAgfSlcbiAgICB9XG59XG5cblxuXG5leHBvcnQgZGVmYXVsdCBpbnRlcmVzdExpc3QiLCJpbXBvcnQgZm9ybUJ1aWxkZXIgZnJvbSBcIi4vZm9ybUJ1aWxkZXJcIlxuaW1wb3J0IGludGVyZXN0Q29sbGVjdGlvbiBmcm9tIFwiLi9pbnRlcmVzdENvbGxlY3Rpb25cIlxuaW1wb3J0IGludGVyZXN0TGlzdCBmcm9tIFwiLi9pbnRlcmVzdExpc3RcIlxuXG5cbmZvcm1CdWlsZGVyLmJ1aWxkRm9ybSgpO1xuXG5pbnRlcmVzdExpc3QubGlzdEludGVyZXN0cygpO1xuXG5cblxuIl19
